<!DOCTYPE html>
<html>
<head>
<script>
let x=''; //initialize x, a character array
let arrayLength = 20; // this limits the user to 20 numbers
let intermediates = new Array(arrayLength); //initialize array
let increment = 0;
let flag = 'NONE'; //flag is changed to indicate pending operation, to be executed when ENTER
 recieved
function myFunction(y) {

if(x == '_'){x='';} //fix issue with a keyboard moving around in response to null input
//if ADD detected
if(y == ' + '){
  intermediates[increment]=Number(x);
  x = ''; //reset string value
  flag = 'ADD';
  increment++;
  y=''; //zero out input field
}

if(y == 'PI'){x='3.141592653589793';y='';}

//if SUB detected set SUB flag, increment
if(y == ' - '){
  intermediates[increment]=Number(x);
  x = ''; //reset string value
  flag = 'SUB';
  increment++;
  y=''; //zero out input field
}


//if SUB detected set SUB flag, increment
if(y == ' / '){
  intermediates[increment]=Number(x);
  x = ''; //reset string value
  flag = 'DIV';
  increment++;
  y=''; //zero out input field
}


//if SUB detected set SUB flag, increment
if(y == ' * '){
  intermediates[increment]=Number(x);
  x = ''; //reset string value
  flag = 'MULT';
  increment++;
  y=''; //zero out input field
}

if(y == 'CLS') {x='';y='';}

//if DEL detected delete one character
if(y == 'DEL') {

  }


//if LENGTH detected return length
if(y == 'LENGTH') {x=x.length;y='';}


//if ENTER detected evaluate
if(y == 'ENTER') {
  //if ADD flag then add
  if(flag == 'ADD') {
    intermediates[increment]=Number(x);
    x = ''; //reset string value
    increment++;
  let result = intermediates[increment-1] + intermediates[increment-2]; //add last two values
    x = result; //assign result to x for future use
    y = ''; //zero out input field
    flag = 'NONE'; //reset flag
  }

  //if SUB flag then subtract
  if(flag == 'SUB') {
    intermediates[increment]=Number(x);
    x = ''; //reset string value
    increment++;
  let result = intermediates[increment-2] - intermediates[increment-1]; //add last two values
    x = result; //assign result to x for future use
    y = ''; //zero out input field
    flag = 'NONE'; //reset flag
  }

  //if DIV flag then divide
  if(flag == 'DIV') {
    intermediates[increment]=Number(x);
    x = ''; //reset string value
    increment++;
  let result = intermediates[increment-2] / intermediates[increment-1]; //divide last two values
    x = result; //assign result to x for future use
    y = ''; //zero out input field
    flag = 'NONE'; //reset flag
  }

  //if MULT flag then multiply
  if(flag == 'MULT') {
    intermediates[increment]=Number(x);
    x = ''; //reset string value
    increment++;
  let result = intermediates[increment-2] * intermediates[increment-1]; //multiply last two values
    x = result; //assign result to x for future use
    y = ''; //zero out input field
    flag = 'NONE'; //reset flag
  }


}

//end ENTER code


//concatenate output into string
x = x + y;

//send output
if(x == ''){x='_';} //fix issue with a keyboard moving around in response to null input
document.getElementById("result").innerHTML = x;
//debug stuff
document.getElementById("flag").innerHTML = flag;
//document.getElementById("increment").innerHTML = increment;
document.getElementById("intermediate_0").innerHTML = intermediates[increment-3];
document.getElementById("intermediate_1").innerHTML = intermediates[increment-2];
document.getElementById("intermediate_2").innerHTML = intermediates[increment-1];
}
</script>


  <title>&#128290; Calculator</title>
  <!-- favicon, left out for copywrite reasons. Emoji used in place -->
  <!--
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
  -->
  
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- button-->
<!--
<style>
a:link, a:visited {
  background-color: #f41326;
  color: white;
  padding: 12px 23px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
}

a:hover, a:active {
  background-color: red;
}
</style>
-->
</head>
<body>
<!-- to do: make all the CSS stuff get pulled from an external file-->
<h2>Calculator</h2>

<!-- start debug display stuff, should be commented out for final implementation -->

<p>Operation:</p>

<p id="flag">_ </p>
<!--
<p>Increment:</p>
<p id="increment">_ </p>
-->
<p id="intermediate_0">_ </p>

<p id="intermediate_1">_ </p>

<p id="intermediate_2">_ </p>


<!-- end debug display stuff, should be commented out for final implementation -->

<p>Result:</p>
<p id="result">_ </p>


<!-- the function of the spaces is to make string processing easier-->
<button onclick="myFunction(' + ')">+</button>
<button onclick="myFunction(' - ')">-</button>
<button onclick="myFunction(' / ')">/</button>
<button onclick="myFunction(' * ')">*</button>
<br>
<button onclick="myFunction('1')">1</button>
<button onclick="myFunction('2')">2</button>
<button onclick="myFunction('3')">3</button>
<!-- <button onclick="myFunction(' . ')">.</button> -->
<br>
<button onclick="myFunction('4')">4</button>
<button onclick="myFunction('5')">5</button>
<button onclick="myFunction('6')">6</button>
<button onclick="myFunction('PI')">&#960</button>
<br>
<button onclick="myFunction('7')">7</button>
<button onclick="myFunction('8')">8</button>
<button onclick="myFunction('9')">9</button>
<button onclick="myFunction('.')">.</button>
<br>
<button onclick="myFunction('0')">0</button>
<button onclick="myFunction('ENTER')">Enter</button>
<button onclick="myFunction('CLS')">CLS</button>
<!-- <button onclick="myFunction('DEL')">DEL</button> -->
<br>
<button onclick="myFunction('LENGTH')">LENGTH</button>
<br>
<br>
<noscript>Wow guess you don't like scripts. You are no fun. Also this will break the website so enjoy staring at this message I guess.</noscript>
<br>
<br>
<!-- un-needed button-->
<!--
<a href="./pages/end.html" target="_blank">&#9762;Big red button&#9762;</a>
-->
</body>
</html>


